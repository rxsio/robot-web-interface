<html>
    <head>
        <title>FIRO2 FTP: /{{ path }}</title>

        <style>
        body {
            font-family: sans-serif;
            margin: 16px;
        }
        a {
            color: inherit;
            text-decoration: none;
        }
        .container {
            display: flex;
            align-items: center;
            flex-direction: row;
            justify-content: space-between;
            margin: 8px 0 8px 16px;
            padding: 8px;
            border: 1px solid #333;
            border-radius: 3px;
        }
        .data {
            display: flex;
            align-items: center;
            flex-direction: row;
        }
        .icon {
            margin-top: -0.25em;
            margin-right: 8px;
            font-size: 1.5em;
        }
        .name {
            font-weight: bold;
        }
        .control {
            border: 1px solid #333;
            font-size: 0.75em;
            border-radius: 8px;
            padding: 8px;
            transition: all 250ms ease;
        }
        .control:hover {
            color: white;
            background: black;
        }
        </style>
    </head>

    <body>
        {% if path == "." %}
            <h1>Directory {{ path }}</h1>
        {% else %}
            <h1>Directory /{{ path }}</h1>
        {% endif %}

        <a class="container" href="./..">
            <div class="data">
                <div class="icon">üìÅ</div>
                <div class="name">..</div>
            </div>
        </a>

        <div>
            <h2>Directories</h2>

            {% for directory in directories %}
                <a class="container" href="{{ directory }}/">
                    <div class="data">
                        <div class="icon">üìÅ</div>
                        <div class="name">/{{ directory }}</div>
                    </div>
                </a>
            {% endfor %}
        </div>

        <div>
            <h2>Files</h2>

            {% for file in files %}
                <a class="container" href="{{ file }}">
                    <div class="data">
                        <div class="icon">üóé</div>
                        <div class="name">{{ file }}</div>
                    </div>

                    <div class="controls">
                        <div class="control control-360" data-src="{{ path }}/{{ file }}">360</div>
                    </div>
                </a>
            {% endfor %}
        </div>
    </body>

    <script>

    function open360Image(src) {
        alert("Ready for 360 image")
    }

    for (let control of document.getElementsByClassName("control-360")) {
        let src = control.getAttribute("data-src");

        control.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();

            open360Image(src);
        });
    }

    </script>
</html>

